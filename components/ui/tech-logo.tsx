"use client";

import React, { useState } from "react";
import Image from "next/image";

interface TechLogoProps {
  name: string;
  logo: string;
  size?: number;
  className?: string;
}

// Tech logo mapping for fallback
const techLogos: Record<string, string> = {
  "Next.js": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPG1hc2sgaWQ9Im1hc2swIiBtYXNrLXR5cGU9ImFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCI+CiAgICA8Y2lyY2xlIGN4PSI5MCIgY3k9IjkwIiByPSI5MCIgZmlsbD0iYmxhY2siLz4KICA8L21hc2s+CiAgPGcgbWFzaz0idXJsKCNtYXNrMCkiPgogICAgPGNpcmNsZSBjeD0iOTAiIGN5PSI5MCIgcj0iOTAiIGZpbGw9ImJsYWNrIi8+CiAgICA8cGF0aCBkPSJNMTQ5LjUwOCAxNTcuNTJMNjkuMTQyIDU0SDU0VjEyNS45N0g2Ni4xMTM2VjY5LjM4MzZMMTM5Ljk5OSAxNjQuODQ1QzE0My4zMzMgMTYyLjYxNCAxNDYuNTA5IDE2MC4xNjUgMTQ5LjUwOCAxNTcuNTJaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIi8+CiAgICA8cmVjdCB4PSIxMTUiIHk9IjU0IiB3aWR0aD0iMTIiIGhlaWdodD0iNzIiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcikiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSIxMDkiIHkxPSIxMTYuNSIgeDI9IjE0NC41IiB5Mj0iMTYwLjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcENvbG9yPSJ3aGl0ZSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3BDb2xvcj0id2hpdGUiIHN0b3BPcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyIiB4MT0iMTIxIiB5MT0iNTQiIHgyPSIxMjAuNzk5IiB5Mj0iMTA2Ljg3NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wQ29sb3I9IndoaXRlIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcENvbG9yPSJ3aGl0ZSIgc3RvcE9wYWNpdHk9IjAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgo8L3N2Zz4=",
  "React": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4NDEuOSA1OTUuMyI+CiAgPGcgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC42IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNCAxNC43IDI4IDMxLjQgNDEuMyA0OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogICAgPHBhdGggZD0iTTUyMC41IDc4LjF6Ii8+CiAgPC9nPgo8L3N2Zz4=",
  "TypeScript": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCI+CiAgPHBhdGggZmlsbD0iIzAwN2FjYyIgZD0iTTAgMjAwVjBoNDAwdjQwMEgwIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTg3LjcgMjAwLjdWMjE3aDUydjE0OGgzNi45VjIxN2g1MnYtMTZjMC05IDAtMTYuMy0uNC0xNi41IDAtLjMtMzEuNy0uNC03MC4yLS40bC03MCAuM3YxNi40bC0uMy0uMXpNMzIxLjQgMTg0YzEwLjIgMi40IDE4IDcgMjUgMTQuMyAzLjcgNCA5LjIgMTEgOS42IDEyLjggMCAuNi0xNy4zIDEyLjMtMjcuOCAxOC44LS40LjMtMi0xLjQtMy42LTQtNS4yLTcuNC0xMC41LTEwLjYtMTguOC0xMS4yLTEyLS44LTIwIDUuNS0yMCAxNiAwIDMuMi42IDUgMS44IDcuNiAyLjcgNS41IDcuNyA4LjggMjMuMiAxNS42IDI4LjYgMTIuMyA0MSAyMC40IDQ4LjUgMzIgOC41IDEzIDEwLjQgMzMuNCA0LjcgNDguNy02LjQgMTYuNy0yMiAyOC00NC4zIDMxLjctNyAxLjItMjMgMS0zMC41LS4zLTE2LTMtMzEuMy0xMS00MC43LTIxLjMtMy43LTQtMTAuOC0xNC43LTEwLjQtMTUuNGwzLjgtMi40IDE1LTguNyAxMS4zLTYuNiAyLjYgMy41YzMuMyA1LjIgMTAuNyAxMi4yIDE1IDE0LjYgMTMgNi43IDMwLjQgNS44IDM5LTIgMy43LTMuNCA1LjMtNyA1LjMtMTIgMC00LjYtLjctNi43LTMtMTAuMi0zLjItNC40LTkuNi04LTI3LjYtMTYtMjAuNy04LjgtMjkuNS0xNC40LTM3LjctMjMtNC43LTUuMi05LTEzLjMtMTEtMjAtMS41LTUuOC0yLTIwLS42LTI1LjcgNC4zLTIwIDE5LjQtMzQgNDEtMzggNy0xLjQgMjMuNS0uOCAzMC40IDFsLS4yLjJ6Ii8+Cjwvc3ZnPg==",
  "Tailwind CSS": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA1NCAzMyI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI3ByZWZpeF9fY2xpcDApIj4KICAgIDxwYXRoIGZpbGw9IiMzOGJkZjgiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTI3IDBjLTcuMiAwLTExLjcgMy42LTEzLjUgMTAuOCAyLjctMy42IDUuODUtNC45NSA5LjQ1LTQuMDUgMi4wNTQuNTEzIDMuNTIyIDIuMDA0IDUuMTQ3IDMuNjUzQzMwLjc0NCAxMy4wOSAzMy44MDggMTYuMiA0MC41IDE2LjJjNy4yIDAgMTEuNy0zLjYgMTMuNS0xMC44LTIuNyAzLjYtNS44NSA0Ljk1LTkuNDUgNC4wNS0yLjA1NC0uNTEzLTMuNTIyLTIuMDA0LTUuMTQ3LTMuNjUzQzM2Ljc1NiAzLjExIDMzLjY5MiAwIDI3IDB6TTEzLjUgMTYuMkM2LjMgMTYuMiAxLjggMTkuOCAwIDI3YzIuNy0zLjYgNS44NS00Ljk1IDkuNDUtNC4wNSAyLjA1NC41MTQgMy41MjIgMi4wMDQgNS4xNDcgMy42NTNDMTcuMjQ0IDI5LjI5IDIwLjMwOCAzMi40IDI3IDMyLjRjNy4yIDAgMTEuNy0zLjYgMTMuNS0xMC44LTIuNyAzLjYtNS44NSA0Ljk1LTkuNDUgNC4wNS0yLjA1NC0uNTEzLTMuNTIyLTIuMDA0LTUuMTQ3LTMuNjUzQzIzLjI1NiAxOS4zMSAyMC4xOTIgMTYuMiAxMy41IDE2LjJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8Y2xpcFBhdGggaWQ9InByZWZpeF9fY2xpcDAiPgogICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDU0djMyLjRIMHoiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4=",
  "Firebase": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjY0Ij4KICA8cGF0aCBkPSJNMTkuNjIgMTEuNTU4bC0zLjIwMyAyLjk4LTIuOTcyLTUuOTk1IDEuNTM4LTMuNDQ4Yy40LS43IDEuMDI0LS42OTIgMS40MTQgMHoiIGZpbGw9IiNmZmEwMDAiLz4KICA8cGF0aCBkPSJNMTMuNDQ1IDguNTQzbDIuOTcyIDUuOTk1LTExLjk3IDExLjEzNXoiIGZpbGw9IiNmNTdmMTciLz4KICA8cGF0aCBkPSJNMjMuMTIzIDcuMDAzYy41NzItLjU1IDEuMTY0LS4zNjIgMS4zMTUuNDE3bDMuMTE2IDE4LjEwNS0xMC4zMjggNi4yYy0uMzYuMi0xLjMyLjI4Ni0xLjMyLjI4NnMtLjg3NC0uMTA0LTEuMjA3LS4zbC00LjQ0Ny02LjA1M3oiIGZpbGw9IiNmZmNhMjgiLz4KICA8cGF0aCBkPSJNMTMuNDQ1IDguNTQzbC04Ljk5NyAxNy4xM0w4LjQ1NS42MzhjLjE0OC0uNzguNTkyLS44NTUuOTg4LS4xNjd6IiBmaWxsPSIjZmZhMDAwIi8+Cjwvc3ZnPg==",
  "Vercel": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA3NiA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMzcuNTI3NCAwTDc1LjA1NDggNjVIMEwzNy41Mjc0IDBaIiBmaWxsPSIjMDAwMDAwIi8+Cjwvc3ZnPg=="
};

export function TechLogo({ name, logo, size = 40, className }: TechLogoProps) {
  const [error, setError] = useState(false);

  // If image fails to load, try to use the fallback data URI
  if (error) {
    const fallbackSrc = techLogos[name];
    
    if (fallbackSrc) {
      return (
        <Image 
          src={fallbackSrc} 
          alt={name} 
          width={size} 
          height={size}
          className={`object-contain ${className}`}
          unoptimized={true}
        />
      );
    }
    
    // If no fallback, show the first letter
    return (
      <div 
        className={`flex items-center justify-center rounded-full bg-primary/10 text-primary font-bold ${className}`}
        style={{ width: size, height: size }}
      >
        {name.charAt(0).toUpperCase()}
      </div>
    );
  }

  return (
    <Image 
      src={logo} 
      alt={name} 
      width={size} 
      height={size}
      className={`object-contain ${className}`}
      unoptimized={logo.endsWith('.svg') || logo.startsWith('data:')}
      onError={() => setError(true)}
    />
  );
} 